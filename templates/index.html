<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì •ì¹˜ì  ì„±í–¥ í…ŒìŠ¤íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .test-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }

        .question-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #007bff;
        }

        .question-text {
            font-size: 16px;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .answer-options {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            flex-wrap: wrap;
        }

        .answer-btn {
            flex: 1;
            min-width: 100px;
            padding: 10px 15px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            text-align: center;
        }

        .answer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .answer-btn.selected {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #28a745);
            transition: width 0.3s ease;
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
        }

        .submit-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .answer-options {
                flex-direction: column;
            }
            
            .answer-btn {
                min-width: auto;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—³ï¸ ì •ì¹˜ì  ì„±í–¥ í…ŒìŠ¤íŠ¸</h1>
            <p>14ê°œì˜ ì§ˆë¬¸ì— ë‹µí•˜ì—¬ ë‹¹ì‹ ì˜ ì •ì¹˜ì  ì¢Œí‘œë¥¼ í™•ì¸í•´ë³´ì„¸ìš”</p>
        </div>

        <div id="test-section" class="test-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
            
            <div id="question-container"></div>
            
            <button id="submit-btn" class="submit-btn hidden" onclick="calculateResult()">
                ê²°ê³¼ í™•ì¸í•˜ê¸°
            </button>
        </div>

        <div id="result-section" class="test-section hidden">
            <h2 style="text-align: center; margin-bottom: 20px;">ë‹¹ì‹ ì˜ ì •ì¹˜ì  ì„±í–¥</h2>
            <div id="compass-chart"></div>
            <div id="result-description"></div>
        </div>
    </div>

    <!-- Plotly.js ë¼ì´ë¸ŒëŸ¬ë¦¬ CDN -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <!-- ë©”ì¸ JavaScript ì½”ë“œ -->
    <script>
        // ì§ˆë¬¸ ë°ì´í„° (ì´ë¯¸ì§€ì˜ ê²½ì œì  ì§ˆë¬¸ë“¤ ê¸°ë°˜)
        const QUESTIONS_DATA = {
            economic: [
                { id: 1, text: "ì‚¬ëŒì€ ê¶ê·¹ì ìœ¼ë¡œ ìì‹ ì´ ì†í•œ êµ­ê°€ë³´ë‹¤ëŠ” ìì‹ ì˜ ì†í•œ ê³„ì¸µ(ê³„ê¸‰)ì— ë”°ë¼ ë‚˜ë‰œë‹¤.", weight: -1 }, // ê³„ê¸‰ì˜ì‹ ê°•ì¡° = ì¢ŒíŒŒ
                { id: 2, text: "ë¬¼ê°€ ì•ˆì •ì´ ì¼ìë¦¬ ì°½ì¶œë³´ë‹¤ ë” ì¤‘ìš”í•˜ë‹¤.", weight: 1 }, // ê¸´ì¶•ì •ì±… ì„ í˜¸ = ìš°íŒŒ
                { id: 3, text: "ê¸°ì—…ë“¤ì´ ìë°œì ìœ¼ë¡œ í™˜ê²½ì„ ë³´í˜¸í•  ê²ƒì´ë¼ê³  ë¯¿ê¸° ì–´ë µê¸° ë•Œë¬¸ì— ê·œì œê°€ í•„ìš”í•˜ë‹¤.", weight: -1 }, // ì •ë¶€ê·œì œ ì§€ì§€ = ì¢ŒíŒŒ
                { id: 4, text: "ëŠ¥ë ¥ì— ë”°ë¼ ì¼í•˜ê³  í•„ìš”ì— ë”°ë¼ ê°€ì§„ë‹¤ëŠ” ê²ƒì€ ê·¼ë³¸ì ìœ¼ë¡œ ì¢‹ì€ ìƒê°ì´ë‹¤.", weight: -1 }, // ì‚¬íšŒì£¼ì˜ ì´ìƒ = ì¢ŒíŒŒ
                { id: 5, text: "ë§ˆì‹œëŠ” ë¬¼ì²˜ëŸ¼ ìƒì¡´ì— í•„ìš”í•œ ê¸°ë³¸ì ì¸ ê²ƒê¹Œì§€ ìƒí’ˆìœ¼ë¡œ íŒ”ë¦¬ëŠ” ê²ƒì€ ë¹„ì°¸í•œ í˜„ì‹¤ì´ë‹¤.", weight: -1 }, // ê¸°ë³¸ê¶Œ ìƒí’ˆí™” ë°˜ëŒ€ = ì¢ŒíŒŒ
                { id: 6, text: "í† ì§€ëŠ” ì‚¬ê±°ë‚˜ íŒ” ìˆ˜ ìˆëŠ” ìƒí’ˆì´ ë˜ì–´ì„œëŠ” ì•ˆ ëœë‹¤.", weight: -1 }, // í† ì§€ ì‚¬ìœ ì œ ë°˜ëŒ€ = ì¢ŒíŒŒ
                { id: 7, text: "ì‚¬íšŒì— ì•„ë¬´ëŸ° ê¸°ì—¬ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ì„œ ë‹¨ì§€ ëˆì„ êµ´ë¦¬ëŠ” ë°©ì‹ìœ¼ë¡œ ë¶€ë¥¼ ì¶•ì í•˜ëŠ” ê²ƒì€ ë°”ëŒì§í•˜ì§€ ì•Šë‹¤.", weight: -1 }, // ê¸ˆìœµìë³¸ ë¹„íŒ = ì¢ŒíŒŒ
                { id: 8, text: "ë³´í˜¸ë¬´ì—­ì´ í•„ìš”í•œ ê²½ìš°ë„ ìˆë‹¤.", weight: -0.5 }, // ì •ë¶€ê°œì… ì„ í˜¸, ì•½í•œ ì¢ŒíŒŒ
                { id: 9, text: "ê¸°ì—…ì˜ ìœ ì¼í•œ ì‚¬íšŒì  ì±…ì„ì€ ì´ìµì„ ë‚¨ê²¨ ì£¼ì£¼ë“¤ì—ê²Œ ë‚˜ëˆ„ì–´ ì£¼ëŠ” ê²ƒì´ë‹¤.", weight: 1 }, // ì‹ ììœ ì£¼ì˜ = ìš°íŒŒ
                { id: 10, text: "ë¶€ìë“¤ì€ í˜„ì¬ ë„ˆë¬´ ë§ì€ ì„¸ê¸ˆì„ ë‚´ê³  ìˆë‹¤.", weight: 1 }, // ê°ì„¸ ì§€ì§€ = ìš°íŒŒ
                { id: 11, text: "ì§€ë¶ˆ ëŠ¥ë ¥ì´ ìˆëŠ” ì‚¬ëŒë“¤ì€ ë” ë†’ì€ ìˆ˜ì¤€ì˜ ì˜ë£Œ ì„œë¹„ìŠ¤ë¥¼ ë°›ì„ ê¶Œë¦¬ê°€ ìˆë‹¤.", weight: 1 }, // ì˜ë£Œ ì‹œì¥í™” = ìš°íŒŒ
                { id: 12, text: "ì •ë¶€ëŠ” ê³µê³µì˜ ì´ìµì„ ì¹¨í•´í•˜ë©´ì„œ ì´ìœ¤ì„ ì¶”êµ¬í•˜ëŠ” ê¸°ì—…ì„ ì²˜ë²Œí•´ì•¼ í•œë‹¤.", weight: -1 }, // ê¸°ì—…ê·œì œ ì§€ì§€ = ì¢ŒíŒŒ
                { id: 13, text: "ë…ì ì„ í•˜ë ¤ëŠ” ì•½íƒˆì  ë‹¤êµ­ì ê¸°ì—…ì„ ê·œì œí•´ì•¼ ì§„ì •í•œ ì˜ë¯¸ì˜ ììœ ì‹œì¥ì´ êµ¬í˜„ë  ìˆ˜ ìˆë‹¤.", weight: -0.5 }, // ë…ì ê·œì œ = ì•½í•œ ì¢ŒíŒŒ
                { id: 14, text: "ì‹œì¥ì´ ììœ ë¡œìš¸ìˆ˜ë¡, ì‚¬ëŒë“¤ë„ ë”ìš± ììœ ë¡œì›Œì§„ë‹¤.", weight: 1 } // ììœ ì‹œì¥ ì‹ ë´‰ = ìš°íŒŒ
            ],
            social: [
                { id: 15, text: "ì‚¬í˜•ì œë„ëŠ” ë²”ì£„ ì–µì œì— íš¨ê³¼ì ì´ë¯€ë¡œ ìœ ì§€ë˜ì–´ì•¼ í•œë‹¤.", weight: 1 }, // ê¶Œìœ„ì£¼ì˜
                { id: 16, text: "ì „í†µì ì¸ ê°€ì¡± ê°€ì¹˜ë¥¼ ë³´í˜¸í•˜ëŠ” ê²ƒì´ ì‚¬íšŒ ì•ˆì •ì— ì¤‘ìš”í•˜ë‹¤.", weight: 1 }, // ê¶Œìœ„ì£¼ì˜  
                { id: 17, text: "êµ­ê°€ ì•ˆë³´ë¥¼ ìœ„í•´ì„œë¼ë©´ ê°œì¸ì˜ ì‚¬ìƒí™œì´ ì–´ëŠ ì •ë„ ê°ì‹œë°›ëŠ” ê²ƒì€ ë¶ˆê°€í”¼í•˜ë‹¤.", weight: 1 }, // ê¶Œìœ„ì£¼ì˜
                { id: 18, text: "ë§ˆë¦¬í™”ë‚˜ ê°™ì€ soft drugì€ ê°œì¸ì˜ ì„ íƒì´ë¯€ë¡œ í•©ë²•í™”ë˜ì–´ì•¼ í•œë‹¤.", weight: -1 }, // ììœ ì£¼ì˜
                { id: 19, text: "ë™ì„± ì»¤í”Œë„ ì´ì„± ì»¤í”Œê³¼ ë™ë“±í•œ ê²°í˜¼ ê¶Œë¦¬ë¥¼ ê°€ì ¸ì•¼ í•œë‹¤.", weight: -1 }, // ììœ ì£¼ì˜
                { id: 20, text: "ë‚™íƒœëŠ” ì—¬ì„±ì˜ ëª¸ì— ê´€í•œ ì„ íƒê¶Œì´ë¯€ë¡œ ë³´ì¥ë˜ì–´ì•¼ í•œë‹¤.", weight: -1 }, // ììœ ì£¼ì˜
                { id: 21, text: "ì´ë¯¼ìë“¤ì€ ìš°ë¦¬ë‚˜ë¼ì˜ ë¬¸í™”ì™€ ê°€ì¹˜ì— ì™„ì „íˆ ë™í™”ë˜ì–´ì•¼ í•œë‹¤.", weight: 1 }, // ê¶Œìœ„ì£¼ì˜
                { id: 22, text: "í•™êµì—ì„œëŠ” êµ­ê°€ì— ëŒ€í•œ ì¶©ì„±ì‹¬ê³¼ ì• êµ­ì‹¬ì„ ê°€ë¥´ì³ì•¼ í•œë‹¤.", weight: 1 }, // ê¶Œìœ„ì£¼ì˜
                { id: 23, text: "ì¢…êµì  ì‹ ë…ë³´ë‹¤ëŠ” ê³¼í•™ì  ì‚¬ì‹¤ì´ ì •ì±… ê²°ì •ì˜ ê¸°ì¤€ì´ ë˜ì–´ì•¼ í•œë‹¤.", weight: -1 }, // ììœ ì£¼ì˜
                { id: 24, text: "ê°œì¸ì˜ ììœ ëŠ” ì‚¬íšŒ ì§ˆì„œë³´ë‹¤ ìš°ì„ ë˜ì–´ì•¼ í•œë‹¤.", weight: -1 }, // ììœ ì£¼ì˜
                { id: 25, text: "ì •ë¶€ëŠ” ì‹œë¯¼ë“¤ì˜ ë„ë•ì  í–‰ë™ì„ ì§€ë„í•  ì±…ì„ì´ ìˆë‹¤.", weight: 1 }, // ê¶Œìœ„ì£¼ì˜
                { id: 26, text: "ì„±ì†Œìˆ˜ìë“¤ì˜ ê¶Œë¦¬ ë³´í˜¸ëŠ” ì‚¬íšŒ ë°œì „ì˜ ì§€í‘œì´ë‹¤.", weight: -1 }, // ììœ ì£¼ì˜
                { id: 27, text: "í…ŒëŸ¬ ë°©ì§€ë¥¼ ìœ„í•´ì„œëŠ” ê°•ë ¥í•œ ë³´ì•ˆ ì¡°ì¹˜ê°€ í•„ìš”í•˜ë‹¤.", weight: 1 }, // ê¶Œìœ„ì£¼ì˜
                { id: 28, text: "ê°œì¸ì˜ í‘œí˜„ì˜ ììœ ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì´ ë¶ˆì¾Œí•´í•˜ë”ë¼ë„ ë³´ì¥ë˜ì–´ì•¼ í•œë‹¤.", weight: -1 } // ììœ ì£¼ì˜
            ]
        };

        // ëª¨ë“  ì§ˆë¬¸ì„ í•©ì³ì„œ ì‚¬ìš©
        let allQuestions = [...QUESTIONS_DATA.economic, ...QUESTIONS_DATA.social];
        let currentAnswers = {};

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadQuestions();
        });



        function loadQuestions() {
            const container = document.getElementById('question-container');
            container.innerHTML = '';
            
            allQuestions.forEach((question, index) => {
                const questionCard = createQuestionCard(question, index);
                container.appendChild(questionCard);
            });
            
            updateProgress();
        }

        function createQuestionCard(question, index) {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.innerHTML = `
                <div class="question-text">
                    <strong>${index + 1}.</strong> ${question.text}
                </div>
                <div class="answer-options">
                    <button class="answer-btn" onclick="selectAnswer(${question.id}, -2)" data-value="-2">
                        ê°•í•˜ê²Œ ë°˜ëŒ€
                    </button>
                    <button class="answer-btn" onclick="selectAnswer(${question.id}, -1)" data-value="-1">
                        ë°˜ëŒ€
                    </button>
                    <button class="answer-btn" onclick="selectAnswer(${question.id}, 0)" data-value="0">
                        ì¤‘ë¦½
                    </button>
                    <button class="answer-btn" onclick="selectAnswer(${question.id}, 1)" data-value="1">
                        ë™ì˜
                    </button>
                    <button class="answer-btn" onclick="selectAnswer(${question.id}, 2)" data-value="2">
                        ê°•í•˜ê²Œ ë™ì˜
                    </button>
                </div>
            `;
            return card;
        }

        function selectAnswer(questionId, value) {
            currentAnswers[questionId] = value;
            
            // ì„ íƒëœ ë²„íŠ¼ ìŠ¤íƒ€ì¼ë§
            const questionCard = event.target.closest('.question-card');
            const buttons = questionCard.querySelectorAll('.answer-btn');
            buttons.forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
            
            updateProgress();
            checkCompletion();
        }

        function updateProgress() {
            const totalQuestions = allQuestions.length;
            const answeredQuestions = Object.keys(currentAnswers).length;
            const progressPercent = (answeredQuestions / totalQuestions) * 100;
            
            document.getElementById('progress-fill').style.width = progressPercent + '%';
        }

        function checkCompletion() {
            const totalQuestions = allQuestions.length;
            const answeredQuestions = Object.keys(currentAnswers).length;
            
            if (answeredQuestions === totalQuestions) {
                document.getElementById('submit-btn').classList.remove('hidden');
                document.getElementById('submit-btn').disabled = false;
            }
        }

        function calculateResult() {
            let economicScore = 0;
            let socialScore = 0;
            
            // ê²½ì œì  ì ìˆ˜ ê³„ì‚°
            QUESTIONS_DATA.economic.forEach(question => {
                const answer = currentAnswers[question.id];
                if (answer !== undefined) {
                    economicScore += answer * question.weight;
                }
            });
            
            // ì‚¬íšŒì  ì ìˆ˜ ê³„ì‚°
            QUESTIONS_DATA.social.forEach(question => {
                const answer = currentAnswers[question.id];
                if (answer !== undefined) {
                    socialScore += answer * question.weight;
                }
            });
            
            // ì ìˆ˜ ì •ê·œí™” (-10 ~ +10 ë²”ìœ„ë¡œ)
            const normalizedEconomic = Math.max(-10, Math.min(10, economicScore * 0.8)); // 14ê°œ ì§ˆë¬¸ ê¸°ì¤€ ì¡°ì •
            const normalizedSocial = Math.max(-10, Math.min(10, socialScore * 0.8)); // 14ê°œ ì§ˆë¬¸ ê¸°ì¤€ ì¡°ì •
            
            showResult(normalizedEconomic, normalizedSocial);
        }

        function showResult(economicScore, socialScore) {
            // í…ŒìŠ¤íŠ¸ ì„¹ì…˜ ìˆ¨ê¸°ê¸°
            document.getElementById('test-section').classList.add('hidden');
            
            // ê²°ê³¼ ì„¹ì…˜ ë³´ì´ê¸°
            document.getElementById('result-section').classList.remove('hidden');
            
            // ì°¨íŠ¸ ê·¸ë¦¬ê¸°
            drawCompass(economicScore, socialScore);
            
            // ê²°ê³¼ ì„¤ëª… í‘œì‹œ
            showResultDescription(economicScore, socialScore);
        }

        function drawCompass(economicScore, socialScore) {
            const data = [
                // ë°°ê²½ ì‚¬ë¶„ë©´
                {
                    x: [-10, 0, 0, -10, -10],
                    y: [0, 0, 10, 10, 0],
                    fill: 'toself',
                    fillcolor: 'rgba(255, 99, 99, 0.3)',
                    line: {color: 'rgba(255, 99, 99, 0)'},
                    hoverinfo: 'text',
                    text: 'ê¶Œìœ„ì£¼ì˜ ì¢ŒíŒŒ<br>Authoritarian Left',
                    showlegend: false,
                    name: 'AuthLeft'
                },
                {
                    x: [0, 10, 10, 0, 0],
                    y: [0, 0, 10, 10, 0],
                    fill: 'toself',
                    fillcolor: 'rgba(99, 99, 255, 0.3)',
                    line: {color: 'rgba(99, 99, 255, 0)'},
                    hoverinfo: 'text',
                    text: 'ê¶Œìœ„ì£¼ì˜ ìš°íŒŒ<br>Authoritarian Right',
                    showlegend: false,
                    name: 'AuthRight'
                },
                {
                    x: [-10, 0, 0, -10, -10],
                    y: [-10, -10, 0, 0, -10],
                    fill: 'toself',
                    fillcolor: 'rgba(99, 255, 99, 0.3)',
                    line: {color: 'rgba(99, 255, 99, 0)'},
                    hoverinfo: 'text',
                    text: 'ììœ ì£¼ì˜ ì¢ŒíŒŒ<br>Libertarian Left',
                    showlegend: false,
                    name: 'LibLeft'
                },
                {
                    x: [0, 10, 10, 0, 0],
                    y: [-10, -10, 0, 0, -10],
                    fill: 'toself',
                    fillcolor: 'rgba(255, 99, 255, 0.3)',
                    line: {color: 'rgba(255, 99, 255, 0)'},
                    hoverinfo: 'text',
                    text: 'ììœ ì£¼ì˜ ìš°íŒŒ<br>Libertarian Right',
                    showlegend: false,
                    name: 'LibRight'
                },
                // ì‚¬ìš©ì ìœ„ì¹˜ ì 
                {
                    x: [economicScore],
                    y: [socialScore],
                    mode: 'markers',
                    marker: {
                        color: 'red',
                        size: 15,
                        symbol: 'circle',
                        line: {
                            color: 'darkred',
                            width: 2
                        }
                    },
                    name: 'ë‹¹ì‹ ì˜ ìœ„ì¹˜',
                    hovertemplate: '<b>ë‹¹ì‹ ì˜ ì •ì¹˜ì  ì„±í–¥</b><br>' +
                                  'ê²½ì œ: %{x:.1f}<br>' +
                                  'ì‚¬íšŒ: %{y:.1f}<br>' +
                                  '<extra></extra>'
                }
            ];

            const layout = {
                title: {
                    text: 'ì •ì¹˜ì  ë‚˜ì¹¨ë°˜ (Political Compass)',
                    font: { size: 20, family: 'Noto Sans KR' }
                },
                xaxis: {
                    title: 'ê²½ì œì  ì„±í–¥ â† ì¢ŒíŒŒ | ìš°íŒŒ â†’',
                    range: [-10, 10],
                    zeroline: true,
                    zerolinecolor: 'black',
                    zerolinewidth: 2,
                    tickvals: [-10, -5, 0, 5, 10],
                    ticktext: ['ê·¹ì¢Œ', 'ì¢ŒíŒŒ', 'ì¤‘ë„', 'ìš°íŒŒ', 'ê·¹ìš°'],
                    showgrid: true,
                    gridcolor: 'lightgray'
                },
                yaxis: {
                    title: 'ì‚¬íšŒì  ì„±í–¥ â† ììœ ì£¼ì˜ | ê¶Œìœ„ì£¼ì˜ â†’',
                    range: [-10, 10],
                    zeroline: true,
                    zerolinecolor: 'black',
                    zerolinewidth: 2,
                    tickvals: [-10, -5, 0, 5, 10],
                    ticktext: ['ê·¹ììœ ', 'ììœ ', 'ì¤‘ë„', 'ê¶Œìœ„', 'ê·¹ê¶Œìœ„'],
                    showgrid: true,
                    gridcolor: 'lightgray'
                },
                plot_bgcolor: 'white',
                paper_bgcolor: 'white',
                width: 600,
                height: 600,
                margin: { l: 80, r: 50, t: 100, b: 80 }
            };

            const config = {
                responsive: true,
                displayModeBar: false
            };

            Plotly.newPlot('compass-chart', data, layout, config);
        }

        function showResultDescription(economicScore, socialScore) {
            const quadrant = getQuadrant(economicScore, socialScore);
            const description = getQuadrantDescription(quadrant, economicScore, socialScore);
            
            document.getElementById('result-description').innerHTML = `
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <h3 style="color: #495057; margin-bottom: 15px;">${quadrant.name}</h3>
                    <p style="line-height: 1.6; margin-bottom: 15px;">${description}</p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
                        <div style="background: white; padding: 15px; border-radius: 8px;">
                            <strong>ê²½ì œì  ì„±í–¥:</strong> ${economicScore.toFixed(1)}<br>
                            <small>${getEconomicLabel(economicScore)}</small>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px;">
                            <strong>ì‚¬íšŒì  ì„±í–¥:</strong> ${socialScore.toFixed(1)}<br>
                            <small>${getSocialLabel(socialScore)}</small>
                        </div>
                    </div>
                    <button onclick="restartTest()" style="margin-top: 20px; padding: 10px 30px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
                        ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°
                    </button>
                </div>
            `;
        }

        function getQuadrant(economic, social) {
            if (economic < 0 && social > 0) {
                return { name: "ê¶Œìœ„ì£¼ì˜ ì¢ŒíŒŒ (Authoritarian Left)", color: "#ff6363" };
            } else if (economic > 0 && social > 0) {
                return { name: "ê¶Œìœ„ì£¼ì˜ ìš°íŒŒ (Authoritarian Right)", color: "#6363ff" };
            } else if (economic < 0 && social < 0) {
                return { name: "ììœ ì£¼ì˜ ì¢ŒíŒŒ (Libertarian Left)", color: "#63ff63" };
            } else {
                return { name: "ììœ ì£¼ì˜ ìš°íŒŒ (Libertarian Right)", color: "#ff63ff" };
            }
        }

        function getQuadrantDescription(quadrant, economic, social) {
            const descriptions = {
                "ê¶Œìœ„ì£¼ì˜ ì¢ŒíŒŒ (Authoritarian Left)": "ê²½ì œì ìœ¼ë¡œëŠ” í‰ë“±ê³¼ ì‚¬íšŒë³´ì¥ì„ ì¤‘ì‹œí•˜ì§€ë§Œ, ì‚¬íšŒì ìœ¼ë¡œëŠ” ì§ˆì„œì™€ í†µì œë¥¼ ì„ í˜¸í•˜ëŠ” ì„±í–¥ì…ë‹ˆë‹¤. ê°•ë ¥í•œ ì •ë¶€ì˜ ì—­í• ì„ í†µí•´ ì‚¬íšŒì  ì•ˆì •ì„ ì¶”êµ¬í•©ë‹ˆë‹¤.",
                "ê¶Œìœ„ì£¼ì˜ ìš°íŒŒ (Authoritarian Right)": "ê²½ì œì ìœ¼ë¡œëŠ” ììœ ì‹œì¥ì„ ì§€ì§€í•˜ë©´ì„œë„ ì‚¬íšŒì ìœ¼ë¡œëŠ” ì „í†µì  ê°€ì¹˜ì™€ ì§ˆì„œë¥¼ ì¤‘ì‹œí•˜ëŠ” ì„±í–¥ì…ë‹ˆë‹¤. ê°•ë ¥í•œ ë¦¬ë”ì‹­ê³¼ ì‚¬íšŒì  ìœ„ê³„ì§ˆì„œë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤.",
                "ììœ ì£¼ì˜ ì¢ŒíŒŒ (Libertarian Left)": "ê²½ì œì ìœ¼ë¡œëŠ” í‰ë“±ì„ ì¶”êµ¬í•˜ë©´ì„œë„ ì‚¬íšŒì ìœ¼ë¡œëŠ” ê°œì¸ì˜ ììœ ì™€ ë‹¤ì–‘ì„±ì„ ì¤‘ì‹œí•˜ëŠ” ì„±í–¥ì…ë‹ˆë‹¤. ì‚¬íšŒì  ì§„ë³´ì™€ ê°œì¸ì˜ ììœ¨ì„±ì„ ë™ì‹œì— ì¶”êµ¬í•©ë‹ˆë‹¤.",
                "ììœ ì£¼ì˜ ìš°íŒŒ (Libertarian Right)": "ê²½ì œì ìœ¼ë¡œëŠ” ììœ ì‹œì¥ì„ ì§€ì§€í•˜ê³  ì‚¬íšŒì ìœ¼ë¡œë„ ê°œì¸ì˜ ììœ ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ í•˜ëŠ” ì„±í–¥ì…ë‹ˆë‹¤. ì •ë¶€ì˜ ê°œì…ì„ ìµœì†Œí™”í•˜ê³  ê°œì¸ì˜ ì„ íƒê¶Œì„ ê°•ì¡°í•©ë‹ˆë‹¤."
            };
            
            return descriptions[quadrant.name] || "ì¤‘ë„ì  ì„±í–¥ì„ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤.";
        }

        function getEconomicLabel(score) {
            if (score < -7) return "ê·¹ì¢Œ ì„±í–¥";
            if (score < -3) return "ì¢ŒíŒŒ ì„±í–¥";
            if (score < -1) return "ì¤‘ë„ì¢ŒíŒŒ";
            if (score < 1) return "ì¤‘ë„";
            if (score < 3) return "ì¤‘ë„ìš°íŒŒ";
            if (score < 7) return "ìš°íŒŒ ì„±í–¥";
            return "ê·¹ìš° ì„±í–¥";
        }

        function getSocialLabel(score) {
            if (score < -7) return "ê·¹ììœ ì£¼ì˜";
            if (score < -3) return "ììœ ì£¼ì˜";
            if (score < -1) return "ì¤‘ë„ììœ ";
            if (score < 1) return "ì¤‘ë„";
            if (score < 3) return "ì¤‘ë„ê¶Œìœ„";
            if (score < 7) return "ê¶Œìœ„ì£¼ì˜";
            return "ê·¹ê¶Œìœ„ì£¼ì˜";
        }

        function restartTest() {
            currentAnswers = {};
            document.getElementById('result-section').classList.add('hidden');
            document.getElementById('test-section').classList.remove('hidden');
            document.getElementById('submit-btn').classList.add('hidden');
            
            // ëª¨ë“  ì„ íƒ ì´ˆê¸°í™”
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            updateProgress();
        }
    </script>
</body>
</html>